<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Soma Ai - Entrada</title>

  <link rel="stylesheet" href="./assets/indexstyle.css">
</head>

<body>

  <img src="./assets/imagens/logo2.png" alt="Logo Soma AI" class="logo">
  
  <div id="menu-container">
    <a href="#" id="btn-comecar" class="btn">COME√áAR</a>
  </div>

  <img src="./assets/imagens/logo_cruzeiro3.PNG" alt="Logo Cruzeio do sul" class="logo-canto">

<script>
  // 1. Pega os elementos
  const botaoComecar = document.getElementById('btn-comecar');
  const menuContainer = document.getElementById('menu-container');
  const logo = document.querySelector('.logo'); // Pegamos o logo aqui

  // 2. Define o total de fases
  const totalFases = 5; // 0..4
  const faseSecretaIndex = 5; // sua fase EXTRA

  // 3. Transformamos o c√≥digo do clique em uma fun√ß√£o reutiliz√°vel
  function mostrarSelecaoDeFases() {
    // Anima o logo
    logo.classList.add('logo-subiu');

    // limpa o container
    menuContainer.innerHTML = '';

    // t√≠tulo
    const tituloFases = document.createElement('h2');
    tituloFases.textContent = 'Selecione uma Fase';
    tituloFases.className = 'fases-titulo';
    menuContainer.appendChild(tituloFases);

    // grid
    const gridContainer = document.createElement('div');
    gridContainer.className = 'fases-grid';

    // pega progresso salvo
    let nivelMaximoSalvo = parseInt(localStorage.getItem('nivelMaximoSomaAI')) || 0;

    // cria as 5 fases normais
    for (let i = 0; i < totalFases; i++) {
      let numFase = i + 1;
      
      const botaoFase = document.createElement('a');
      botaoFase.id = `fase-${i}`;
      botaoFase.className = 'fase-botao';
      botaoFase.textContent = numFase;

      if (i <= nivelMaximoSalvo) {
        // desbloqueada
        botaoFase.classList.add('desbloqueado');
        botaoFase.href = `jogo.html?fase=${i}`;
      } else {
        // bloqueada
        botaoFase.classList.add('bloqueado');
        botaoFase.href = '#';
        botaoFase.onclick = (ev) => ev.preventDefault();
      }

      gridContainer.appendChild(botaoFase);
    }

    // üëáüëá AQUI ENTRA A FASE SECRETA üëáüëá
    if (nivelMaximoSalvo >= faseSecretaIndex) {
      const botaoSecreto = document.createElement('a');
      botaoSecreto.id = 'fase-secreta';
      botaoSecreto.className = 'fase-botao desbloqueado';
      botaoSecreto.textContent = '‚òÖ'; // pode trocar por "6" ou "?"
      botaoSecreto.title = 'Fase Secreta!';
      botaoSecreto.href = `jogo.html?fase=${faseSecretaIndex}`;
      gridContainer.appendChild(botaoSecreto);
    }

    menuContainer.appendChild(gridContainer);

    // bot√£o voltar
    const voltarContainer = document.createElement('div');
    voltarContainer.className = 'voltar-container';

    const botaoVoltar = document.createElement('a');
    botaoVoltar.href = 'index.html';
    botaoVoltar.className = 'btn';
    botaoVoltar.textContent = 'VOLTAR';

    voltarContainer.appendChild(botaoVoltar);
    menuContainer.appendChild(voltarContainer);
  }

  // --- L√ìGICA DE CARREGAMENTO (AQUI EST√Å A MUDAN√áA) ---

  // 1. Pega os par√¢metros da URL
  const urlParams = new URLSearchParams(window.location.search);
  const view = urlParams.get('view');

  // 2. Verifica se a URL cont√©m "?view=fases"
  if (view === 'fases') {
    // Se SIM: Mostra a sele√ß√£o de fases imediatamente
    mostrarSelecaoDeFases();
  } else {
    // Se N√ÉO: Adiciona o clique ao bot√£o "COME√áAR" (como era antes)
    botaoComecar.addEventListener('click', function(event) {
      event.preventDefault();
      mostrarSelecaoDeFases(); // Chama a nova fun√ß√£o
    });
  }
</script>
